---
title: "24/7 运行也不心疼电费：小主机功耗优化策略"
date: 2026-02-12
summary: "调整 CPU 频率与硬盘休眠，每年省下一条内存。"
categories: ["nas"]
---

# 24/7运行也不心疼电费：小主机功耗优化策略

让NAS 24小时开机是很多用户的常态：PT下载需要保种、远程访问需要随时在线、照片备份需要实时同步、智能家居中枢更是不能间断。但随之而来的问题是：电费账单。一台功率50瓦的NUC一年耗电约400度，按居民电价计算就是两三百元。如果同时运行多盘位NAS或额外挂载硬盘，功耗更是成倍增长。

其实，通过合理的功耗优化策略，我们可以将NAS的用电量降低30%-50%，在保持服务可用性的同时，让电费不再是负担。本文将分享从硬件到软件的全方位节能方案，帮助你打造一个"省电"的NAS。

## 硬件层面的功耗基础

功耗优化从硬件选购阶段就已经开始。不同的硬件组合，基础功耗差异可能高达数倍。

**处理器选择**：Intel处理器后缀带"T"的为低功耗版本（TDP通常在35W以内），而标准版功耗动辄65W以上。以i5-12400和i5-12400T为例，后者基础功耗低了将近一半。如果你的NAS主要用于存储和轻度Docker应用，选择低功耗CPU完全够用，NUC系列更是专为低功耗设计，TDP通常在15W-28W之间。

**存储介质**：机械硬盘（HDD）的功耗约为5-10瓦，而固态硬盘（SSD）仅需2-5瓦。如果你的NAS主要用途不是大容量存储（媒体库、PT下载），使用SSD作为系统盘不仅更快，还能显著降低待机功耗。另外，不建议使用外接USB硬盘作为长期存储方案，因为USB供电不稳定且功耗管理较差。

**电源与机箱**：对于自组NAS，选择高效率的电源（80 PLUS Gold认证以上）可以在长期运行中节省可观电能。钛金级电源虽然更贵，但转换效率可达96%以上，长期使用的电费节省能够弥补差价。

## BIOS层面的节能设置

大多数用户忽略了BIOS中的功耗管理选项。这些设置在默认情况下可能不是最优的，手动调整可以带来明显的节能效果。

**C-States（处理器睡眠状态）**：启用C-States允许处理器在空闲时进入低功耗状态。从C0（完全工作）到C6/C7/C8（深度睡眠），功耗可以降低数瓦。建议在BIOS中启用所有C-States支持。

**Speed Shift（动态频率调节）**：这个技术允许处理器根据负载快速调整频率。与操作系统的电源管理配合，可以实现更精细的功耗控制。在BIOS中确保"Intel Speed Shift Technology"已启用。

**SATA ASPM（PCIe ASPM）**：如果你的硬盘支持ASPM（Active State Power Management），在BIOS中开启可以进一步降低硬盘空闲时的功耗。

进入BIOS的方法很简单：开机时按F2或Delete键（取决于主板型号），找到"Power Management"或"Advanced"相关选项进行调整。

## 操作系统的电源配置

无论你使用的是群晖、TrueNAS还是Ubuntu，操作系统都提供了丰富的电源管理选项。

**群晖DSM**：在"控制面板" > "硬件和电源"中可以找到相关设置。启用"硬盘休眠"可以让机械硬盘在无访问时停止转动，这是最有效的节能手段。建议将休眠时间设置为30分钟到2小时（取决于访问频率）。另外，"CPU频率自动调节"可以让系统在空闲时降低处理器频率。

**TrueNAS Scale**：ZFS的 ARC（Adaptive Replacement Cache）会占用部分内存来提升性能，但这也会增加功耗。如果追求极致省电，可以在/etc/modprobe.d/zfs.conf中调整ARC大小限制。对于7×24运行的场景，建议保持默认设置，因为省下的电费可能不如性能下降带来的体验损失。

**Linux通用**：如果使用Ubuntu等通用Linux系统，可以通过调节器（governor）来控制CPU频率。执行以下命令查看可用的调节器：

```bash
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors
```

推荐使用"powersave"（始终保持最低频率）或"ondemand"（根据负载动态调节）模式。设置方法：

```bash
echo powersave | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
```

## 硬盘休眠的最佳实践

硬盘是NAS功耗的大户，一块机械硬盘的功耗可达8-10瓦。如果你的NAS有4-6块硬盘都处于24小时运转状态，功耗轻松超过40瓦。相反，如果合理使用硬盘休眠，可以将这部分功耗降到几乎为零。

**合理设置休眠时间**：休眠太频繁会导致硬盘频繁启停（缩短寿命），而休眠太晚则失去节能意义。建议根据访问习惯设置：如果白天经常访问媒体库，可以设置2-3小时休眠；如果主要用于夜间下载，可以设置更短的休眠时间。

**排除频繁访问的文件夹**：如果将下载目录设置为系统共享，PT客户端会持续读写硬盘，导致硬盘无法休眠。建议将下载目录放在独立的非共享位置，或使用Docker运行下载工具并挂载到容器内部。

**使用SSD缓存**：为ZFS存储池添加SSD缓存可以大幅减少对机械硬盘的访问频率，从而延长硬盘休眠时间。TrueNAS的L2ARC和群晖的SHR2都支持这一功能。

## Docker与虚拟机的能耗管理

Docker容器和虚拟机在NAS功耗中往往被忽视。实际上，不当配置的Docker可能让CPU持续处于高负载状态，严重增加功耗。

**容器资源限制**：在使用docker-compose时，为每个容器设置CPU和内存限制，防止某个容器"失控"占用全部资源。示例：

```yaml
services:
  jellyfin:
    image: jellyfin/jellyfin:latest
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 4G
```

**自动重启与健康检查**：避免运行已经"死掉"但未被发现的容器，它们可能在后台持续消耗资源。配置合理的restart策略和健康检查：

```yaml
restart: unless-stopped
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:8096"]
  interval: 5m
  timeout: 3s
  retries: 3
```

**虚拟机的电源管理**：如果不需要7×24运行虚拟机（如Windows游戏机），可以使用ACPI功能实现自动开关机。例如，配置Wake-on-LAN让虚拟机在需要时远程唤醒，平时则完全关闭以节省电能。

## 功耗监控与数据可视化

优化功耗需要数据支撑。通过监控，你可以了解实际用电情况，验证优化效果。

**群晖**：在"控制面板" > "硬件和电源"中可以看到CPU温度和风扇转速。如果使用UPS（不间断电源），还能查看输入功率。

**硬件监控工具**：群晖的Resource Monitor可以实时查看CPU、内存、磁盘使用率。对于更详细的功耗数据，可以考虑购买智能插座（如小米、涂鸦品牌），通过手机App查看实时功率和历史记录。

**历史数据对比**：建议记录优化前后的功耗数据。可以选择一周内不做任何优化时的平均功耗作为基准，然后逐步尝试各项优化措施，记录每次改动后的变化。

## 实际效果与建议

以一台典型的6盘位NAS为例（不含硬盘功耗），优化前后的功耗对比：

- 优化前：处理器+主板功耗约30-40瓦（CPU高负载时可达60瓦）
- 优化后：通过BIOS调节、C-states启用、CPU频率控制，功耗可降至15-25瓦

加上硬盘休眠的贡献（假设4块8TB硬盘，休眠时功耗约0.5瓦/块），总体功耗可以从约70瓦降至约20-30瓦。每年可节省约300-400度电，折合电费150-200元。

对于NUC用户，功耗本身就更低（通常10-20瓦），优化空间相对较小，但通过关闭不必要的服务、设置合理的休眠策略，仍然可以实现20%左右的节能。

## 总结

NAS的功耗优化是一个系统工程，从硬件选型到BIOS设置，从系统配置到应用管理，每个环节都有优化空间。但需要记住的是，节能不能以牺牲服务可用性为代价——如果为了省电而导致PT保种失败、远程访问中断、智能家居中枢宕机，就得不偿失了。

最合理的策略是：根据实际使用需求，找到性能与功耗的平衡点。毕竟，我们装NAS的目的是享受便利和乐趣，而不是为了省电而让它变得难用。在这个基础上，适当优化，每年省下一条内存的钱，还是很香的。
