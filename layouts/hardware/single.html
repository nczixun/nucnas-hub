{{ define "main" }}
<a href="/hardware" class="back-link">← 返回设备库</a>

<article class="hw-article">
    <!-- A. 硬件身份卡 -->
    <section class="hw-hero">
        <div class="hw-hero-grid">
            <div class="hw-hero-image">
                {{ with .Params.image }}
                <img src="{{ . }}" alt="{{ $.Title }}">
                {{ else }}
                <div class="hw-hero-placeholder">📷</div>
                {{ end }}
            </div>
            
            <div class="hw-hero-info">
                <h1 class="hw-hero-title">{{ .Title }}</h1>
                
                {{/* 摘要 */}}
                {{ $summary := .Description }}
                {{ with .Params.summary }}{{ $summary = . }}{{ end }}
                <div class="hw-hero-summary">
                    {{ $summary }}
                </div>
                
                {{/* 元信息 */}}
                <div class="hw-hero-meta">
                    {{ with .Params.hw_specs.cpu }}
                    <div class="hw-meta-item">
                        <span class="hw-meta-label">处理器</span>
                        <span class="hw-meta-value">{{ . }}</span>
                    </div>
                    {{ end }}
                    {{ with .Params.hw_specs.tdp }}
                    <div class="hw-meta-item">
                        <span class="hw-meta-label">TDP</span>
                        <span class="hw-meta-value">{{ . }}</span>
                    </div>
                    {{ end }}
                    {{ with .Params.hw_specs.ram }}
                    <div class="hw-meta-item">
                        <span class="hw-meta-label">内存</span>
                        <span class="hw-meta-value">{{ . }}</span>
                    </div>
                    {{ end }}
                </div>
                
                {{/* 评分与价格 */}}
                <div class="hw-hero-score">
                    <div class="hw-score-box">
                        <span class="hw-score-value">{{ with .Params.score }}{{ . }}{{ else }}8.5{{ end }}</span>
                        <span class="hw-score-max">/10</span>
                        <span class="hw-score-label">综合评分</span>
                    </div>
                    
                    {{ with .Params.price }}
                    <div class="hw-price-box">
                        <div class="hw-price-value">¥{{ . }}</div>
                        <div class="hw-price-label">参考价格</div>
                    </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </section>

    {{/* B. 参数表格 */}}
    {{ with .Params.hw_specs }}
    <section class="hw-specs">
        <h2 class="hw-specs-title">📋 核心参数</h2>
        <div class="hw-specs-grid">
            {{ with .cpu }}<div class="hw-spec-row"><div class="hw-spec-key">处理器</div><div class="hw-spec-value">{{ . }}</div></div>{{ end }}
            {{ with .tdp }}<div class="hw-spec-row"><div class="hw-spec-key">TDP 功耗</div><div class="hw-spec-value">{{ . }}</div></div>{{ end }}
            {{ with .ram }}<div class="hw-spec-row"><div class="hw-spec-key">内存</div><div class="hw-spec-value">{{ . }}</div></div>{{ end }}
            {{ with .storage }}<div class="hw-spec-row"><div class="hw-spec-key">存储</div><div class="hw-spec-value">{{ . }}</div></div>{{ end }}
            {{ with .lan }}<div class="hw-spec-row"><div class="hw-spec-key">网口</div><div class="hw-spec-value">{{ . }}</div></div>{{ end }}
            {{ with .gpu }}<div class="hw-spec-row"><div class="hw-spec-key">显卡</div><div class="hw-spec-value">{{ . }}</div></div>{{ end }}
            {{ with .price }}<div class="hw-spec-row"><div class="hw-spec-key">参考价格</div><div class="hw-spec-value" style="color: var(--accent); font-weight: 700;">¥{{ . }}</div></div>{{ end }}
        </div>
    </section>
    {{ end }}

    {{/* C. 优缺点红绿榜 */}}
    {{ $pros := slice }}{{ with .Params.pros }}{{ if reflect.IsSlice . }}{{ $pros = . }}{{ else }}{{ $pros = (split . ", ") }}{{ end }}{{ end }}
    {{ $cons := slice }}{{ with .Params.cons }}{{ if reflect.IsSlice . }}{{ $cons = . }}{{ else }}{{ $cons = (split . ", ") }}{{ end }}{{ end }}
    
    {{ if or ($pros) ($cons) }}
    <section class="hw-pros-cons">
        {{ if $pros }}
        <div class="hw-pros-box">
            <h3 class="hw-box-title"><span>✅</span> 优点</h3>
            <ul>
                {{ range $pros }}
                <li>{{ . }}</li>
                {{ end }}
            </ul>
        </div>
        {{ end }}
        
        {{ if $cons }}
        <div class="hw-cons-box">
            <h3 class="hw-box-title"><span>❌</span> 遗憾</h3>
            <ul>
                {{ range $cons }}
                <li>{{ . }}</li>
                {{ end }}
            </ul>
        </div>
        {{ end }}
    </section>
    {{ end }}

    <hr style="border: none; border-top: 1px solid var(--border-color); margin: 32px 0;">

    {{/* D. 详细内容 */}}
    <section class="hw-content">
        {{ .Content }}
    </section>
</article>
{{ end }}
