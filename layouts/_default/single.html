{{ define "main" }}
<!-- é¢åŒ…å±‘ -->
<nav class="breadcrumb">
    <a href="/">é¦–é¡µ</a>
    <span class="breadcrumb-separator">/</span>
    {{ with .Section }}
    {{ $section := . }}
    {{ if eq . "hardware" }}
    <a href="/hardware/">ç¡¬ä»¶æµ‹è¯„</a>
    {{ else if eq . "nas" }}
    <a href="/nas/">NASå­¦é™¢</a>
    {{ else if eq . "ai" }}
    <a href="/ai/">AI</a>
    {{ else }}
    <a href="/{{ . }}/">{{ . }}</a>
    {{ end }}
    <span class="breadcrumb-separator">/</span>
    {{ end }}
    <span>{{ .Title }}</span>
</nav>

<!-- æ–‡ç« å¤´éƒ¨ -->
<header class="article-header">
    <h1 class="article-title">{{ .Title }}</h1>
    
    <div class="article-meta">
        <span class="meta-date">ğŸ• {{ .Date.Format "2006-01-02" }}</span>
        {{ with .Params.categories }}
        <span class="meta-category">{{ index . 0 }}</span>
        {{ end }}
    </div>
    
    <!-- åˆ†äº«æŒ‰é’® -->
    <div class="action-buttons">
        <button class="action-btn favorite-btn" data-post-id="{{ .RelPermalink }}">
            <span>â­</span> æ”¶è—
        </button>
        <button class="action-btn share-btn" data-platform="weibo">
            <span>ğŸ“¤</span> åˆ†äº«
        </button>
    </div>
</header>

<!-- æ–‡ç« ç‰¹è‰²å›¾ -->
{{ with .Params.image }}
<figure class="article-featured-image">
    <img src="{{ . }}" alt="{{ $.Title }}">
    {{ with $.Params.imageCredit }}
    <figcaption>æ‘„å½±ï¼š{{ . }}</figcaption>
    {{ end }}
</figure>
{{ end }}

<!-- æ–‡ç« æ‘˜è¦ -->
{{ with .Summary }}
<div class="article-summary">
    {{ . }}
</div>
{{ end }}

<!-- æ–‡ç« å†…å®¹ -->
<article class="article-content">
    {{ .Content }}
</article>

<!-- è”ç›Ÿé“¾æ¥ -->
{{ if .Params.affiliate }}
<div class="affiliate-box">
    <h3>ğŸ›’ è´­ä¹°æ¨è</h3>
    <p>å¦‚æœä½ å¯¹æœ¬æ–‡ä»‹ç»çš„äº§å“æ„Ÿå…´è¶£ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è´­ä¹°ï¼š</p>
    <div class="affiliate-links">
        {{ range .Params.affiliate }}
        <a href="{{ .url }}" target="_blank" class="affiliate-btn">
            <span class="affiliate-name">{{ .name }}</span>
            <span class="affiliate-price">{{ .price }}</span>
        </a>
        {{ end }}
    </div>
</div>
{{ end }}

<!-- æ–‡ç« æ ‡ç­¾ -->
{{ with .Params.tags }}
<div class="article-tags">
    <span class="tags-label">æ ‡ç­¾ï¼š</span>
    {{ range . }}
    <a href="/tags/{{ . | urlize }}" class="tag">{{ . }}</a>
    {{ end }}
</div>
{{ end }}

<!-- ç›¸å…³æ–‡ç« æ¨è -->
{{ $related := .Site.RegularPages.Related . | first 3 }}
{{ if $related }}
<section class="related-articles">
    <h3 class="section-title">ç›¸å…³æ–‡ç« </h3>
    <div class="related-grid">
        {{ range $related }}
        <a href="{{ .RelPermalink }}" class="related-card">
            <div class="related-image">
                {{ with .Params.image }}
                <img src="{{ . }}" alt="{{ $.Title }}">
                {{ else }}
                <span>ğŸ“„</span>
                {{ end }}
            </div>
            <h4 class="related-title">{{ .Title }}</h4>
        </a>
        {{ end }}
    </div>
</section>
{{ end }}

<!-- è¯„è®ºåŒº -->
<section class="comments-section">
    <h3 class="section-title">è¯„è®º</h3>
    
    <!-- è¯„è®ºè¡¨å• -->
    <form class="comment-form" onsubmit="event.preventDefault(); alert('è¯„è®ºåŠŸèƒ½éœ€è¦åç«¯æ”¯æŒ');">
        <textarea placeholder="å†™ä¸‹ä½ çš„è¯„è®º..."></textarea>
        <button type="submit" class="btn-primary">æäº¤è¯„è®º</button>
    </form>
    
    <!-- è¯„è®ºåˆ—è¡¨ -->
    <div class="comment-list">
        <div class="comment-item">
            <div class="comment-avatar">ğŸ‘¤</div>
            <div class="comment-content">
                <div class="comment-author">è®¿å®¢</div>
                <div class="comment-time">2024-01-01</div>
                <p class="comment-text">æœŸå¾…æ›´å¤šå†…å®¹ï¼</p>
            </div>
        </div>
    </div>
</section>
{{ end }}
